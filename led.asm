  ORG 0
  MOV SP, #50H
MAIN:
  CLR C
  MOV A, #FFh
  RLC A
  MOV P1, A

SHIFT_LEFT:
  CALL DELAY
  RLC A
  MOV P1, A
  JNB P1.7, SHIFT_RIGHT
  JMP SHIFT_LEFT

SHIFT_RIGHT:
  CALL DELAY
  CALL DELAY
  RRC A
  MOV P1, A
  JNB P1.0, SHIFT_LEFT
  JMP SHIFT_RIGHT
  
DELAY:
  PUSH 5
  PUSH 6
  PUSH 7
  PUSH 4
  
  MOV R5, #1
D1:
  MOV R6, #250
D2:
  MOV R7, #250
D3:
  DJNZ R7, D3
  DJNZ R6, D2
  JB P2.0, NO_CLICK
  JNB P2.0, $
  MOV R4, #100
  DJNZ R4, $
  JB P2.0, $
  MOV R4, #100
  DJNZ R4, $
  
NO_CLICK:
  DJNZ R5, D1
  
  POP 4
  POP 7
  POP 6
  POP 5
  
  RET

END
